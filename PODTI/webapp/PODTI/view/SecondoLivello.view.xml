<mvc:View xmlns:mvc="sap.ui.core.mvc" xmlns="sap.m" xmlns:t="sap.ui.table" xmlns:l="sap.ui.layout" xmlns:f="sap.ui.layout.form" xmlns:core="sap.ui.core" xmlns:html="http://www.w3.org/1999/xhtml" controllerName="kpmg.custom.pod.PODTI.PODTI.controller.SecondoLivello" width="100%" height="100%">   
    <Page title="{i18n>SecondoLivello.title}" class="kpmgGDPage" showHeader="false" enableScrolling="true">
        <content>
            <VBox width="100%" height="100%" renderType="Bare" class="mainContainer">
                <t:TreeTable id="treeTableSecondoLivello" rowSelectionChange="onSelectionSecondoOrTerzoLivello" selectionMode="Single"  
                class="kpmgGDTable" rows="{SecondoLivelloModel>/operations}" enableColumnReordering="true" enableGrouping="true" selectionBehavior="RowOnly"
                visibleRowCountMode="Auto" visibleRowCount="10" rowHeight="45px" >
                    <t:layoutData>
                        <FlexItemData growFactor="1" baseSize="0%"/>
                    </t:layoutData>
                    <t:extension>
                    <OverflowToolbar style="Clear">    
                        <HBox width="70%" height="100%" renderType="Bare" class="leftButtonsPODOperation" >
                        </HBox>       
                        <ToolbarSpacer/>     
                        <ComboBox id="machineTypeId" placeholder="{i18n>SecondoLivello.treeTable.placeholder.insertMachineType}" class="GDComboBoxField" items="{MachineTypeModel>/machineTypes}" showSecondaryValues="true" change="onChangeMachineType">
                            <core:ListItem key="{MachineTypeModel>machine_type}" text="{MachineTypeModel>machine_type}" />
                        </ComboBox>    
                    </OverflowToolbar>
                    </t:extension>
                    <t:columns>
                        <t:Column width="44%" hAlign="Left">
                            <Label text="{i18n>SecondoLivello.treeTable.macroAttivita}"/>
                            <t:template>
                                <Link text="{SecondoLivelloModel>macroAttivita}" press="onCellDescriptionPress" wrapping="true" class="textMacroAttivita treeTextClickable"/>
                            </t:template>
                        </t:Column>
                        <t:Column width="10%" hAlign="Center">
                            <Label text="{i18n>SecondoLivello.treeTable.wc}"/>
                            <t:template>
                                <Text text="{SecondoLivelloModel>workcenter}"/>
                            </t:template>
                        </t:Column>
                        <t:Column width="8%" hAlign="Center">
                            <Label text="{i18n>SecondoLivello.treeTable.nc}"/>
                            <t:template>
                                <core:Icon src="sap-icon://high-priority" color="#ca0b30" visible="{SecondoLivelloModel>nonconformances}" class="iconSecondoLivello" />
                            </t:template>
                        </t:Column>
                        <t:Column width="8%" hAlign="Center">
                            <Label text="{i18n>SecondoLivello.treeTable.status}"/>
                            <t:template>
                                <core:Icon src="{path: 'SecondoLivelloModel>status',formatter: '.getStatusIconLev2and3'}" color="{path: 'SecondoLivelloModel>status', formatter: '.getStatusColorLev2and3' }" class="iconSecondoLivello" />
                            </t:template>
                        </t:Column>  
                        <t:Column width="10%" hAlign="Center">
                            <Label text="{i18n>SecondoLivello.treeTable.mark}"/>
                            <t:template>
                                <Button text="{i18n>SecondoLivello.treeTable.mark}" width="100%" press="onMarkPress" visible="{SecondoLivelloModel>mark}" />
                            </t:template>
                        </t:Column>
                        <t:Column width="10%" hAlign="Center">
                            <Label text="{i18n>SecondoLivello.treeTable.safety}"/>
                            <t:template>
                                <Text text="{SecondoLivelloModel>safety}"/>
                            </t:template>
                        </t:Column>  
                        <t:Column width="8%" hAlign="Center">
                            <Label text="{i18n>SecondoLivello.treeTable.info}"/>
                            <t:template>
                                <core:Icon src="sap-icon://hint" color="#d70a32" press="onInfoOperationPress" visible="{SecondoLivelloModel>info}" />
                            </t:template>
                        </t:Column>
                    </t:columns>
                </t:TreeTable>
            </VBox>
        </content>
    </Page>
</mvc:View>